"use client";
import "@/components/form/input.css";

import React, { useState } from "react";
import { useRouter } from "next/navigation";
import Link from "next/link";

import { useAuth } from "@/context/auth";

import { Submit, FormSeparator } from "@/components/form/Form";
import Checkbox from "@/components/ui/checkbox/checkbox";

export default function SignUp() {
  const [username, setUsername] = useState("");
  const [country, setCountry] = useState("USA");
  const [sex, setSex] = useState("male");
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [confirmPassword, setConfirmPassword] = useState("");

  const { signup } = useAuth();

  const handleInputChange = (
    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>,
    field: string
  ) => {
    if (field == "username") setUsername(e.currentTarget.value);
    if (field == "country") setCountry(e.currentTarget.value);
    if (field == "sex") setSex(e.currentTarget.id);
    if (field == "email") setEmail(e.currentTarget.value);
    if (field == "password") setPassword(e.currentTarget.value);
    if (field == "confirmPassword") setConfirmPassword(e.currentTarget.value);
  };

  const router = useRouter();
  const handleSubmit = async (e: any) => {
    e.preventDefault();
    try {
      await signup(email, password, username, country, sex);
      router.push("/signin");
    } catch (err) {
      console.log(err);
    }
  };

  return (
    <>
      <h1 className="py-6 text-2xl font-medium">Create your account</h1>
      <form action="" className="relative flex flex-col">
        <div>
          <input
            type="text"
            autoComplete="off"
            autoCorrect="off"
            spellCheck="false"
            placeholder="Username"
            className="input input-top"
            value={username}
            onChange={(e) => {
              handleInputChange(e, "username");
            }}
          />
        </div>

        <div>
          <select
            value={country}
            onChange={(e) => {
              handleInputChange(e, "country");
            }}
            className="input input-bot"
          >
            <option value="AFG" dir="auto">
              Afghanistan
            </option>
            <option value="ALA" dir="auto">
              Åland Islands
            </option>
            <option value="ALB" dir="auto">
              Albania
            </option>
            <option value="DZA" dir="auto">
              Algeria
            </option>
            <option value="ASM" dir="auto">
              American Samoa
            </option>
            <option value="AND" dir="auto">
              Andorra
            </option>
            <option value="AGO" dir="auto">
              Angola
            </option>
            <option value="AIA" dir="auto">
              Anguilla
            </option>
            <option value="ATA" dir="auto">
              Antarctica
            </option>
            <option value="ATG" dir="auto">
              Antigua And Barbuda
            </option>
            <option value="ARG" dir="auto">
              Argentina
            </option>
            <option value="ARM" dir="auto">
              Armenia
            </option>
            <option value="ABW" dir="auto">
              Aruba
            </option>
            <option value="AUS" dir="auto">
              Australia
            </option>
            <option value="AUT" dir="auto">
              Austria
            </option>
            <option value="AZE" dir="auto">
              Azerbaijan
            </option>
            <option value="BHS" dir="auto">
              Bahamas
            </option>
            <option value="BHR" dir="auto">
              Bahrain
            </option>
            <option value="BGD" dir="auto">
              Bangladesh
            </option>
            <option value="BRB" dir="auto">
              Barbados
            </option>
            <option value="BLR" dir="auto">
              Belarus
            </option>
            <option value="BEL" dir="auto">
              Belgium
            </option>
            <option value="BLZ" dir="auto">
              Belize
            </option>
            <option value="BEN" dir="auto">
              Benin
            </option>
            <option value="BMU" dir="auto">
              Bermuda
            </option>
            <option value="BTN" dir="auto">
              Bhutan
            </option>
            <option value="BOL" dir="auto">
              Bolivia
            </option>
            <option value="BIH" dir="auto">
              Bosnia and Herzegovina
            </option>
            <option value="BWA" dir="auto">
              Botswana
            </option>
            <option value="BVT" dir="auto">
              Bouvet Island
            </option>
            <option value="BRA" dir="auto">
              Brazil
            </option>
            <option value="IOT" dir="auto">
              British Indian Ocean Territory
            </option>
            <option value="VGB" dir="auto">
              British Virgin Islands
            </option>
            <option value="BRN" dir="auto">
              Brunei Darussalam
            </option>
            <option value="BGR" dir="auto">
              Bulgaria
            </option>
            <option value="BFA" dir="auto">
              Burkina Faso
            </option>
            <option value="BDI" dir="auto">
              Burundi
            </option>
            <option value="KHM" dir="auto">
              Cambodia
            </option>
            <option value="CMR" dir="auto">
              Cameroon
            </option>
            <option value="CAN" dir="auto">
              Canada
            </option>
            <option value="CPV" dir="auto">
              Cape Verde
            </option>
            <option value="BES" dir="auto">
              Caribbean Netherlands
            </option>
            <option value="CYM" dir="auto">
              Cayman Islands
            </option>
            <option value="CAF" dir="auto">
              Central African Republic
            </option>
            <option value="TCD" dir="auto">
              Chad
            </option>
            <option value="CHL" dir="auto">
              Chile
            </option>
            <option value="CHN" dir="auto">
              China mainland
            </option>
            <option value="CXR" dir="auto">
              Christmas Island
            </option>
            <option value="CCK" dir="auto">
              Cocos (Keeling) Islands
            </option>
            <option value="COL" dir="auto">
              Colombia
            </option>
            <option value="COM" dir="auto">
              Comoros
            </option>
            <option value="COK" dir="auto">
              Cook Islands
            </option>
            <option value="CRI" dir="auto">
              Costa Rica
            </option>
            <option value="CIV" dir="auto">
              Côte d&apos;Ivoire
            </option>
            <option value="HRV" dir="auto">
              Croatia
            </option>
            <option value="CUW" dir="auto">
              Curaçao
            </option>
            <option value="CYP" dir="auto">
              Cyprus
            </option>
            <option value="CZE" dir="auto">
              Czechia
            </option>
            <option value="COD" dir="auto">
              Democratic Republic of the Congo
            </option>
            <option value="DNK" dir="auto">
              Denmark
            </option>
            <option value="DJI" dir="auto">
              Djibouti
            </option>
            <option value="DMA" dir="auto">
              Dominica
            </option>
            <option value="DOM" dir="auto">
              Dominican Republic
            </option>
            <option value="ECU" dir="auto">
              Ecuador
            </option>
            <option value="EGY" dir="auto">
              Egypt
            </option>
            <option value="SLV" dir="auto">
              El Salvador
            </option>
            <option value="GNQ" dir="auto">
              Equatorial Guinea
            </option>
            <option value="ERI" dir="auto">
              Eritrea
            </option>
            <option value="EST" dir="auto">
              Estonia
            </option>
            <option value="SWZ" dir="auto">
              Eswatini
            </option>
            <option value="ETH" dir="auto">
              Ethiopia
            </option>
            <option value="FLK" dir="auto">
              Falkland Islands
            </option>
            <option value="FRO" dir="auto">
              Faroe Islands
            </option>
            <option value="FJI" dir="auto">
              Fiji
            </option>
            <option value="FIN" dir="auto">
              Finland
            </option>
            <option value="FRA" dir="auto">
              France
            </option>
            <option value="GUF" dir="auto">
              French Guiana
            </option>
            <option value="PYF" dir="auto">
              French Polynesia
            </option>
            <option value="ATF" dir="auto">
              French Southern Territories
            </option>
            <option value="GAB" dir="auto">
              Gabon
            </option>
            <option value="GMB" dir="auto">
              Gambia
            </option>
            <option value="GEO" dir="auto">
              Georgia
            </option>
            <option value="DEU" dir="auto">
              Germany
            </option>
            <option value="GHA" dir="auto">
              Ghana
            </option>
            <option value="GIB" dir="auto">
              Gibraltar
            </option>
            <option value="GRC" dir="auto">
              Greece
            </option>
            <option value="GRL" dir="auto">
              Greenland
            </option>
            <option value="GRD" dir="auto">
              Grenada
            </option>
            <option value="GLP" dir="auto">
              Guadeloupe
            </option>
            <option value="GUM" dir="auto">
              Guam
            </option>
            <option value="GTM" dir="auto">
              Guatemala
            </option>
            <option value="GGY" dir="auto">
              Guernsey
            </option>
            <option value="GIN" dir="auto">
              Guinea
            </option>
            <option value="GNB" dir="auto">
              Guinea-Bissau
            </option>
            <option value="GUY" dir="auto">
              Guyana
            </option>
            <option value="HTI" dir="auto">
              Haiti
            </option>
            <option value="HMD" dir="auto">
              Heard And Mc Donald Islands
            </option>
            <option value="HND" dir="auto">
              Honduras
            </option>
            <option value="HKG" dir="auto">
              Hong Kong
            </option>
            <option value="HUN" dir="auto">
              Hungary
            </option>
            <option value="ISL" dir="auto">
              Iceland
            </option>
            <option value="IND" dir="auto">
              India
            </option>
            <option value="IDN" dir="auto">
              Indonesia
            </option>
            <option value="IRQ" dir="auto">
              Iraq
            </option>
            <option value="IRL" dir="auto">
              Ireland
            </option>
            <option value="IMN" dir="auto">
              Isle of Man
            </option>
            <option value="ISR" dir="auto">
              Israel
            </option>
            <option value="ITA" dir="auto">
              Italy
            </option>
            <option value="JAM" dir="auto">
              Jamaica
            </option>
            <option value="JPN" dir="auto">
              Japan
            </option>
            <option value="JEY" dir="auto">
              Jersey
            </option>
            <option value="JOR" dir="auto">
              Jordan
            </option>
            <option value="KAZ" dir="auto">
              Kazakhstan
            </option>
            <option value="KEN" dir="auto">
              Kenya
            </option>
            <option value="KIR" dir="auto">
              Kiribati
            </option>
            <option value="XKS" dir="auto">
              Kosovo
            </option>
            <option value="KWT" dir="auto">
              Kuwait
            </option>
            <option value="KGZ" dir="auto">
              Kyrgyzstan
            </option>
            <option value="LAO" dir="auto">
              Laos
            </option>
            <option value="LVA" dir="auto">
              Latvia
            </option>
            <option value="LBN" dir="auto">
              Lebanon
            </option>
            <option value="LSO" dir="auto">
              Lesotho
            </option>
            <option value="LBR" dir="auto">
              Liberia
            </option>
            <option value="LBY" dir="auto">
              Libya
            </option>
            <option value="LIE" dir="auto">
              Liechtenstein
            </option>
            <option value="LTU" dir="auto">
              Lithuania
            </option>
            <option value="LUX" dir="auto">
              Luxembourg
            </option>
            <option value="MAC" dir="auto">
              Macao
            </option>
            <option value="MDG" dir="auto">
              Madagascar
            </option>
            <option value="MWI" dir="auto">
              Malawi
            </option>
            <option value="MYS" dir="auto">
              Malaysia
            </option>
            <option value="MDV" dir="auto">
              Maldives
            </option>
            <option value="MLI" dir="auto">
              Mali
            </option>
            <option value="MLT" dir="auto">
              Malta
            </option>
            <option value="MHL" dir="auto">
              Marshall Islands
            </option>
            <option value="MTQ" dir="auto">
              Martinique
            </option>
            <option value="MRT" dir="auto">
              Mauritania
            </option>
            <option value="MUS" dir="auto">
              Mauritius
            </option>
            <option value="MYT" dir="auto">
              Mayotte
            </option>
            <option value="MEX" dir="auto">
              Mexico
            </option>
            <option value="FSM" dir="auto">
              Micronesia
            </option>
            <option value="MDA" dir="auto">
              Moldova
            </option>
            <option value="MCO" dir="auto">
              Monaco
            </option>
            <option value="MNG" dir="auto">
              Mongolia
            </option>
            <option value="MNE" dir="auto">
              Montenegro
            </option>
            <option value="MSR" dir="auto">
              Montserrat
            </option>
            <option value="MAR" dir="auto">
              Morocco
            </option>
            <option value="MOZ" dir="auto">
              Mozambique
            </option>
            <option value="MMR" dir="auto">
              Myanmar
            </option>
            <option value="NAM" dir="auto">
              Namibia
            </option>
            <option value="NRU" dir="auto">
              Nauru
            </option>
            <option value="NPL" dir="auto">
              Nepal
            </option>
            <option value="NLD" dir="auto">
              Netherlands
            </option>
            <option value="NCL" dir="auto">
              New Caledonia
            </option>
            <option value="NZL" dir="auto">
              New Zealand
            </option>
            <option value="NIC" dir="auto">
              Nicaragua
            </option>
            <option value="NER" dir="auto">
              Niger
            </option>
            <option value="NGA" dir="auto">
              Nigeria
            </option>
            <option value="NIU" dir="auto">
              Niue
            </option>
            <option value="NFK" dir="auto">
              Norfolk Island
            </option>
            <option value="MNP" dir="auto">
              Northern Mariana Islands
            </option>
            <option value="MKD" dir="auto">
              North Macedonia
            </option>
            <option value="NOR" dir="auto">
              Norway
            </option>
            <option value="OMN" dir="auto">
              Oman
            </option>
            <option value="PAK" dir="auto">
              Pakistan
            </option>
            <option value="PLW" dir="auto">
              Palau
            </option>
            <option value="PSE" dir="auto">
              Palestinian Territories
            </option>
            <option value="PAN" dir="auto">
              Panama
            </option>
            <option value="PNG" dir="auto">
              Papua New Guinea
            </option>
            <option value="PRY" dir="auto">
              Paraguay
            </option>
            <option value="PER" dir="auto">
              Peru
            </option>
            <option value="PHL" dir="auto">
              Philippines
            </option>
            <option value="PCN" dir="auto">
              Pitcairn
            </option>
            <option value="POL" dir="auto">
              Poland
            </option>
            <option value="PRT" dir="auto">
              Portugal
            </option>
            <option value="PRI" dir="auto">
              Puerto Rico
            </option>
            <option value="QAT" dir="auto">
              Qatar
            </option>
            <option value="COG" dir="auto">
              Republic of the Congo
            </option>
            <option value="REU" dir="auto">
              Réunion
            </option>
            <option value="ROU" dir="auto">
              Romania
            </option>
            <option value="RUS" dir="auto">
              Russia
            </option>
            <option value="RWA" dir="auto">
              Rwanda
            </option>
            <option value="BLM" dir="auto">
              Saint Barthélemy
            </option>
            <option value="SHN" dir="auto">
              Saint Helena
            </option>
            <option value="KNA" dir="auto">
              Saint Kitts And Nevis
            </option>
            <option value="LCA" dir="auto">
              Saint Lucia
            </option>
            <option value="MAF" dir="auto">
              Saint Martin
            </option>
            <option value="VCT" dir="auto">
              Saint Vincent and the Grenadines
            </option>
            <option value="WSM" dir="auto">
              Samoa
            </option>
            <option value="SMR" dir="auto">
              San Marino
            </option>
            <option value="STP" dir="auto">
              Sao Tome And Principe
            </option>
            <option value="SAU" dir="auto">
              Saudi Arabia
            </option>
            <option value="SEN" dir="auto">
              Senegal
            </option>
            <option value="SRB" dir="auto">
              Serbia
            </option>
            <option value="SYC" dir="auto">
              Seychelles
            </option>
            <option value="SLE" dir="auto">
              Sierra Leone
            </option>
            <option value="SGP" dir="auto">
              Singapore
            </option>
            <option value="SXM" dir="auto">
              Sint Maarten
            </option>
            <option value="SVK" dir="auto">
              Slovakia
            </option>
            <option value="SVN" dir="auto">
              Slovenia
            </option>
            <option value="SLB" dir="auto">
              Solomon Islands
            </option>
            <option value="SOM" dir="auto">
              Somalia
            </option>
            <option value="ZAF" dir="auto">
              South Africa
            </option>
            <option value="SGS" dir="auto">
              South Georgia and South Sandwich Islands
            </option>
            <option value="KOR" dir="auto">
              South Korea
            </option>
            <option value="SSD" dir="auto">
              South Sudan
            </option>
            <option value="ESP" dir="auto">
              Spain
            </option>
            <option value="LKA" dir="auto">
              Sri Lanka
            </option>
            <option value="SPM" dir="auto">
              St. Pierre And Miquelon
            </option>
            <option value="SDN" dir="auto">
              Sudan
            </option>
            <option value="SUR" dir="auto">
              Suriname
            </option>
            <option value="SJM" dir="auto">
              Svalbard And Jan Mayen Islands
            </option>
            <option value="SWE" dir="auto">
              Sweden
            </option>
            <option value="CHE" dir="auto">
              Switzerland
            </option>
            <option value="TWN" dir="auto">
              Taiwan
            </option>
            <option value="TJK" dir="auto">
              Tajikistan
            </option>
            <option value="TZA" dir="auto">
              Tanzania
            </option>
            <option value="THA" dir="auto">
              Thailand
            </option>
            <option value="TMP" dir="auto">
              Timor-Leste
            </option>
            <option value="TGO" dir="auto">
              Togo
            </option>
            <option value="TKL" dir="auto">
              Tokelau
            </option>
            <option value="TON" dir="auto">
              Tonga
            </option>
            <option value="TTO" dir="auto">
              Trinidad and Tobago
            </option>
            <option value="TUN" dir="auto">
              Tunisia
            </option>
            <option value="TUR" dir="auto">
              Turkey
            </option>
            <option value="TKM" dir="auto">
              Turkmenistan
            </option>
            <option value="TCA" dir="auto">
              Turks and Caicos Islands
            </option>
            <option value="TUV" dir="auto">
              Tuvalu
            </option>
            <option value="UGA" dir="auto">
              Uganda
            </option>
            <option value="UKR" dir="auto">
              Ukraine
            </option>
            <option value="ARE" dir="auto">
              United Arab Emirates
            </option>
            <option value="GBR" dir="auto">
              United Kingdom
            </option>
            <option value="USA" dir="auto">
              United States
            </option>
            <option value="UMI" dir="auto">
              United States Minor Outlying Islands
            </option>
            <option value="URY" dir="auto">
              Uruguay
            </option>
            <option value="UZB" dir="auto">
              Uzbekistan
            </option>
            <option value="VUT" dir="auto">
              Vanuatu
            </option>
            <option value="VAT" dir="auto">
              Vatican
            </option>
            <option value="VEN" dir="auto">
              Venezuela
            </option>
            <option value="VNM" dir="auto">
              Vietnam
            </option>
            <option value="VIR" dir="auto">
              Virgin Islands (U.S.)
            </option>
            <option value="WLF" dir="auto">
              Wallis And Futuna Islands
            </option>
            <option value="ESH" dir="auto">
              Western Sahara
            </option>
            <option value="YEM" dir="auto">
              Yemen
            </option>
            <option value="ZMB" dir="auto">
              Zambia
            </option>
            <option value="ZWE" dir="auto">
              Zimbabwe
            </option>
          </select>
        </div>

        <div className="relative flex w-full flex-col px-4 py-7">
          <span className="absolute top-2 text-xs">Select sex *</span>
          <div className="flex justify-between">
            <div>
              <input
                type="radio"
                name="sex"
                id="M"
                checked={sex == "M"}
                onChange={(e) => {
                  handleInputChange(e, "sex");
                }}
                className="mr-1"
              />
              <label htmlFor="M">Male</label>
            </div>

            <div>
              <input
                type="radio"
                name="sex"
                id="F"
                checked={sex == "F"}
                onChange={(e) => {
                  handleInputChange(e, "sex");
                }}
                className="mr-1"
              />
              <label htmlFor="F">Female</label>
            </div>

            <div>
              <input
                type="radio"
                name="sex"
                id="U"
                checked={sex == "U"}
                onChange={(e) => {
                  handleInputChange(e, "sex");
                }}
                className="mr-1"
              />
              <label htmlFor="U">Prefer not to say</label>
            </div>
          </div>
        </div>

        <div>
          <input
            type="email"
            autoComplete="email"
            autoCorrect="off"
            spellCheck="false"
            placeholder="E-mail"
            className="input input-top"
            value={email}
            onChange={(e) => {
              handleInputChange(e, "email");
            }}
          />
        </div>

        <div>
          <input
            type="password"
            autoComplete="new-password"
            autoCorrect="off"
            spellCheck="false"
            placeholder="Password"
            className="input input-mid"
            value={password}
            onChange={(e) => {
              handleInputChange(e, "password");
            }}
          />
        </div>

        <div>
          <input
            type="password"
            autoComplete="off"
            autoCorrect="off"
            spellCheck="false"
            placeholder="Confirm password"
            className="input input-bot"
            value={confirmPassword}
            onChange={(e) => {
              handleInputChange(e, "confirmPassword");
            }}
          />
        </div>

        <Checkbox>I accept the Terms of Use & Privacy Policy. *</Checkbox>

        {/* bottom position = (48px input height - 28px button height) / 2 = 10px = 0.625rem */}
        <Submit
          handleClick={handleSubmit}
          isEnabled={false}
          className="bottom-14 right-2"
        />
      </form>

      <FormSeparator />

      <div className="flex flex-col items-center justify-center text-xs">
        <div>* Required Fields</div>

        <div>
          <span>Already have an account? </span>
          <Link href="/signin">Sign in here.</Link>
        </div>
      </div>
    </>
  );
}
